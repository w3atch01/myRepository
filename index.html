<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="css-div-main">
        <h1>برنامه روزانه</h1>
        <input type="text" class="js-input" onkeydown="keyDown()">
        <br>
        <div class="css-button-div">
        <button class="js-add" onclick="addToList()" ><img src="pngs/Add.png" class="css-png"></button>
        <button class="js-first" onclick="remove('first')"><img src="/pngs/-S.png" class="css-png"></button>
        <button class="js-last" onclick="remove('last')"><img src="/pngs/-L.png" class="css-png"></button>
        <button class="js-all" onclick="remove('all')"><img src="pngs/Remove.png" class="css-png"></button>
        </div>
        


        <p class="js-list"></p>

        <ol>
        <div class="js-div"></div>
        </ol>
    </div>
    <script>

        
        let list = []


        if (localStorage.getItem('listSave')) {
            list = JSON.parse(localStorage.getItem('listSave'))
        } else if (!localStorage.getItem('listSave')) {
            list = []
        }

        updateDiv()
        

        function addToList () {
            if (!document.querySelector(".js-input").value) {
                document.querySelector('.js-list').innerHTML = "pls enter a task!"
            }
            else if (document.querySelector(".js-input").value)  {
            list.push(document.querySelector(".js-input").value)
            document.querySelector(".js-input").value = ""
            localStorage.setItem('listSave', JSON.stringify(list))
            document.querySelector(".js-list").innerHTML = ""
            }
            updateDiv()
            
        }



        function keyDown() {
            if  (event.key == "Enter") {
                addToList()
            }
        }



        function remove (task) {
            if (task == "first" ) {
                list.shift()
            } else if (task == 'last') {
                list.pop()
            } else if (task == "all") {
                list = []
                console.log("all tasks removed sucsesfully!")
            } 

            localStorage.setItem('listSave', JSON.stringify(list))
            updateDiv()
        } 
        


        function updateDiv() {

            let i = 0
            let newList = ""
            while (list.length > i) {
                newList = newList + `<li> ${list[i]} </li>` 
                i = i + 1
            }
            document.querySelector('.js-div').innerHTML = newList
        }
        

    </script>
</body>
</html>
